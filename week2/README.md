

# Команди за работа с файлове и още команди за файлова система :))

**Но отново преди това** 

`echo "some nice string"`  - принтира на терминала текста в кавичките (неочаквано, нали?)

`echo -n "some nice string"` - прави същото, но не поставя нов ред (т.е. промп-та ще се залепи след това в кавичките), (да, полезно е, ще ви трябва за контролното, след 1-2 упражнения ще видите защо).

## Работа с файлове и директории
1. `cat file1 file2 ...` - показва съдържанието на файл/овете

2. `touch f1 f2 f3 ...` - създава празни файлове

3. `tee f1 f2 ...` - създава файловете f1 f2 и ни позволява да пишем в тях едновременно

4. `cp [source] [destination]` - копира файлове

	`cp f1 f2 f3 path_to_dir` - примерно използване 

	Също така можем да го използваме да копираме съдържанието от един файл в друг:

	`cp f1 f2` - копираме съдържанието на f1 във f2

5. `mv f1 dir_to_be_moved` - премества файла f1 в указаната директория

	`mv f1 f2` - преименува файла f1 на f2

6. `mkdir f1 f2 ...` - създава празни директории 

7. `rmdir f1 f2 ...` - трие **само** празни директории

8. `rm f1 f2 ...` - трие файлове

	`rm -i f1 f2 ...` - пуска ни запитване дали искаме да изтрием файловете

	`rm -r f1 dir ..` - рекурсивно триене, чрез него можем да изтрием непразна директория

### FYI

 1. Ако искате да копирате цялата директория използвате опция `-r`
    (recursive)
 2. След време ще се налага чрез един готин редактор да пишете bash скриптове на сървъра. Сигурно ще искате да си ги пращате, за да си ги имате във вкъщи. За да копирате нещо от сървъра до компютъра ви ползвате scp (secure copy):
 
	 `scp s81xxx@os-server.fmi.uni-sofia.bg:<path_to_file> /some/local/directory`

	За да използвате командата не трябва да се включени към сървъра, затова ще ви трябва някой от вариантите, които споменах първата седмица

3.  `mkdir -p dir1/dir2/dir3` - създава целия указан път, т.е. създава dir1, в нея създава dir2 и в dir2 създава dir3


## Работа със съдържанието на файловете
1. `file f1` - дава информация за типа на файла

2. `wc f1 f2 ...` - брои:

	Опции:
	
	- `-l` - редове
	
	- `-c` - байтове

	- `-w` - думи 
	
	Ако не зададем опция командата изписва: бр. редове, бр. символи, бр. думи и името на файла
	
3. `head f1 f2 ...` - командата без аргументи по подразбиране дава първите 10 реда от указаните файлове

	Опции:
	- `-n` - така командата ни дава първите num реда от файловете

	- `-c`  - дава ни първите num байта от файла

4.	`tail f1 f2 ...` - без аргументи ни дава последните 10 реда от указаните файлове
	
	Опции:
	- `-n`- така командата ни дава последните num реда от файловете

	- `-c` - дава ни последните num байта от файла

5. `more f1` - ако имаме голям файл го показва екран по екран

	**FYI:** `less f1` - подобно на more, но докато more показва файла само отгоре-надолу, less ни позволява да се движим и в двете посоки. 

6.  `sort f1` - сортира f1 по редове

	Опции:
	- `-o output_file` - вместо резултата да се покаже на екрана се записва в output_file
7. `comm f1 f2` - сравнява два сортирани файла ред по ред. Изходът е 3 колони - 1-ва колона е уникалните редове за f1, 2-ра е уникалните редове за f2, а третата е редове, които са еднакви в двата файла
8.  `diff f1 f2`  - сравнява два файла ред по ред. Дава ни кои редове и по какъв начин трябва да бъдат променени в единия файл, за да бъдат двата файла идентични. 

9. `cmp f1 f2` - сравнява 2 файла байт по байт 

	- ако файловете са еднакви то командата не връща нищо

	- ако файловете се различават, командата ни връща първата позиция, на която се различават
10. `cut [options] [files]` - реже части от всеки ред на файл
	
	Опции: 

	- `-c` - извлича специфично указани символи, примерно:
		
		`cut -c 1-3,8-10 f1` - показва ни първите 3 символа от всеки ред на файла, прескача до 8-мия и показва от 8-мия до 10-тия 
		
		`cut -c 1,5,7 f1` - показва ни 1-вия, 5-тия и 7-мия символ от всеки ред на файла f1

		**Важно** - на пръв поглед `-c` изглежда прави същото като `-b` (`-b` реже по байтове), но не е така, защото някои символи са повече от един байт. 

		Примерно "♣" e 3 байта. Ако имаме файл със съдържание "♣abc" `cut -c 1,4` ще ни даде "♣c", докато `cut -b 1,4` няма да успее да ни принтира "♣" .
	
	- `-f` - реже по номер на колона. Ако не е указан разделител реже по whitespace
	
	- `-d` - указва по какъв разделител да се реже
	
		**Note:** `-f` и `-d` често се ползват заедно
		 
		 `cut -d ":" -f 1-3 f1` - ще ни покаже първите 3 колони от файла f1 

11. `tr [options] [SET1] [SET2]` - заменя или изтрива специфични символи в подаден низ, където SET1 е множеството от символи, които трябва да се заменят, SET2 е множеството, с което да заменим символите от SET1 в низа

	-  tr без опции прави точно гореспоменатото
	
	- `-c` - сменя всички символи в низа, които **не са** в SET1, с тези от SET2.
	
	- `-d` - изтрива всички срещания на символите от SET1
	
	- `-s` -  замества повтарящите се символи, изброени в SET1, само с един символ
		 
13. `grep str file` - търси низ/рег израз във файл. Като резултат командата връща редовете от файла, в които се съдържа низа/рег. израза

	`grep -v str file` - връща редовете, в които **не се** съдържа низа/рег. израз
	
## Бонус работа с файловата система 

`find` - командата без аргументи извежда на екрана абсолютно всички файлове (дори и тези в поддиректориите) на текущата директория, в която се намирате

Синтаксис: `find [dir-to-be-searched] [arguments]` 
		
Аргументи:

- `-name` - търси по име на файл
	
- `-type` - търси по тип на файл
	
- `-user` - търси по притежател на файла
		
- `-group` - търси по групата, притежател на файла
	
- `-size` - търси по размер на файла (трябва да специфицирате мерната единица) 
	
- `-exec` - изпълнява команда върху всеки един намерен резултат
			
	**Пример:**  `find / -name *.txt -exec wc -c {} \;` Тук ще намерим размера на всеки файл с разширение txt в цялата файлова директория.
	
	**Защо ни трябва {} \;** - find ще изпълни нашата команда и ще замести {} с намерените резултати, а **\;** гарантира, че командата ще се изпълни точно веднъж върху всеки един от резултатите.  


	
## Задачи 

1. Създайте файл f1 и напишете в него "abc". Създайте друг, празен файл, f2. Копирайте съдържанието на f1 във файл с име f3. Създайте директория dir1 и влезте в нея. Преместете f1, f2, f3 в директорията без да излизате от нея, като в същото време ги преименувате на ff1, ff2, ff3. 
2. Преместете всички файлове, започващи с "f" в нова директория "del" и изтрийте тази директория, като преди това изведете на терминала запитване дали искате да изтриете директорията.
3. Потърсете дали в /etc/passwd има хора с името "Георги".
4. Принтирайте на екрана информация за всички студенти от /etc/passwd, чиито факултетни номера **не** започват с "8"
5. Потърсете в цялата файлова система дали има директории, започващи с dir.
6. Изведете на екрана размера на всеки .txt файл в байтове, който притежавате във вашата начална потребителска директория. 
7. Изведете на екрана последните 5 реда на всички файлове, които са притежание на групата student
8. Изведете на екрана типовете на всички файлове, които имате в началната ви потребителска директория. 
9. Принтирайте **само** имената на хората, записани в /etc/passwd
10. Проверете дали /etc/passwd е сортиран.

